{
  "feature_title": "Plan de pruebas unitarias para módulo Admin Student",
  "tasks": [
    {
      "id": "T01",
      "title": "Auditar servicios, controladores y DTOs de Admin Student",
      "description": "Inventariar clases, responsabilidades, reglas de validación y dependencias de los servicios, controladores y DTOs del módulo `admin/student`, excluyendo models, repositories, mappers y specs.",
      "command": "/analyze",
      "params": {
        "targets": [
          "src/main/java/trinity/play2learn/backend/admin/student/services",
          "src/main/java/trinity/play2learn/backend/admin/student/controllers",
          "src/main/java/trinity/play2learn/backend/admin/student/dtos"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Listado de clases y flujos cubiertos por cada servicio/controlador.",
        "Documentación de validaciones, excepciones y dependencias externas críticas.",
        "Identificación de riesgos de negocio sin cobertura de pruebas actual."
      ]
    },
    {
      "id": "T02",
      "title": "Diseñar estrategia de pruebas unitarias para Admin Student",
      "description": "Documentar alcance, métricas, dobles necesarios y fixtures comunes para services, controllers y DTOs de `admin/student`, manteniendo excluidos models, repositories, mappers y specs.",
      "command": "/design",
      "params": {
        "artifact": "docs/testing/student-unit-test-strategy.md"
      },
      "status": "done",
      "acceptance_criteria": [
        "Estrategia define objetivos de cobertura y criterios de calidad específicos del módulo.",
        "Incluye matriz de escenarios priorizados por riesgo y dependencias simuladas.",
        "Detalla datos de prueba reutilizables y lineamientos para fixtures compartidos."
      ]
    },
    {
      "id": "T03",
      "title": "Generar pruebas para StudentRegisterService y StudentUpdateService",
      "description": "Crear suites unitarias que cubran flujos felices, conflictos y validaciones de carga inicial al registrar y actualizar estudiantes.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/services/StudentRegisterServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/student/services/StudentUpdateServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Escenarios exitosos y de conflicto (DNI duplicado, email repetido, curso inexistente) verificados.",
        "Mocks validan interacciones con servicios comunes (`StudentExistByDNIService`, `StudentGetByCourseService`, etc.).",
        "Asserts aseguran construcción correcta de DTOs y mensajes de excepción esperados."
      ]
    },
    {
      "id": "T04",
      "title": "Refinar pruebas de registro y actualización de Student",
      "description": "Optimizar suites de registro y actualización eliminando duplicidad, detallando intención y homogenizando datos de prueba.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/services/StudentRegisterServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/student/services/StudentUpdateServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Se reutilizan builders/helpers para solicitudes y entidades simuladas.",
        "Cada caso usa `@DisplayName` con patrón Given-When-Then y asserts expresivos (AssertJ).",
        "Cobertura de ramas clave se mantiene sin code smells ni warnings de Mockito."
      ]
    },
    {
      "id": "T05",
      "title": "Generar pruebas para StudentDeleteService y StudentRestoreService",
      "description": "Implementar suites que validen borrado lógico, restricciones de asociaciones y restauración de estudiantes.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/services/StudentDeleteServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/student/services/StudentRestoreServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Cobertura de escenarios: estudiante inexistente, ya eliminado, asociaciones activas y eliminación/restauración exitosa.",
        "Verificación de interacciones con repositorios y servicios comunes simulados.",
        "Aserciones comprueban cambios de estado (`deletedAt`) y mensajes de excepción."
      ]
    },
    {
      "id": "T06",
      "title": "Refinar pruebas de eliminación y restauración de Student",
      "description": "Revisar suites de eliminación/restauración para mejorar organización, fixtures y claridad narrativa.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/services/StudentDeleteServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/student/services/StudentRestoreServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Casos agrupados con `@Nested` o helpers que expliquen precondiciones y expectativas.",
        "Fixtures comunes centralizadas y reutilizadas en los escenarios.",
        "Sin duplicidad de código ni configuraciones de Mockito repetidas."
      ]
    },
    {
      "id": "T07",
      "title": "Generar pruebas para StudentGetService y StudentsListServices",
      "description": "Desarrollar suites que validen la obtención individual y listados simples de estudiantes, cubriendo filtros y estados.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/services/StudentGetServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/student/services/StudentsListServicesTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "`StudentGetService` prueba rutas felices y `NotFoundException` ante IDs inexistentes.",
        "`StudentsListServices` valida filtros por curso/estado y exclusión de registros eliminados.",
        "Mocks aseguran delegación correcta hacia servicios commons y repositorios."
      ]
    },
    {
      "id": "T08",
      "title": "Refinar pruebas de obtención y listados simples de Student",
      "description": "Optimizar suites de obtención y listado simple para mejorar expresividad, reutilización de fixtures y documentación de casos límite.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/services/StudentGetServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/student/services/StudentsListServicesTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Helpers generan colecciones y DTOs consistentes reutilizables entre escenarios.",
        "Asserts detallan contenido de colecciones y mensajes devueltos.",
        "Escenarios edge (sin resultados, registros eliminados) quedan documentados."
      ]
    },
    {
      "id": "T09",
      "title": "Generar pruebas para StudentListPaginatedService",
      "description": "Implementar suite que valide paginación, filtros dinámicos y ordenamientos para el listado paginado de estudiantes.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/services/StudentListPaginatedServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Se cubren combinaciones de `search`, `filters`, `order` y `pageable` con utilitarios simulados.",
        "Verificación de mapeo a DTOs y adaptación de `PaginatedData`.",
        "Se valida manejo de páginas vacías y parámetros inválidos."
      ]
    },
    {
      "id": "T10",
      "title": "Refinar pruebas de listado paginado de Student",
      "description": "Pulir la suite paginada para centralizar fixtures, mejorar asserts y clarificar casos límite.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/services/StudentListPaginatedServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Uso de builders para `Page` y DTOs reutilizados en múltiples escenarios.",
        "Asserts emplean AssertJ (`extracting`, `containsExactly`) describiendo resultados.",
        "Documentación de variantes edge como paginación fuera de rango o filtros vacíos."
      ]
    },
    {
      "id": "T11",
      "title": "Generar pruebas para servicios commons de resolución de Student",
      "description": "Crear suites unitarias para `StudentGetByIdService`, `StudentGetByEmailService` y `StudentGetByCourseService`, validando escenarios felices y excepciones.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/services/commons/StudentGetByIdServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/student/services/commons/StudentGetByEmailServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/student/services/commons/StudentGetByCourseServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Cada servicio cubre resoluciones exitosas y lanzamientos de `NotFoundException`.",
        "Mocks verifican consultas a repositorios y normalización de resultados.",
        "Se documentan supuestos de negocio (unicidad de email, pertenencia a curso) mediante asserts."
      ]
    },
    {
      "id": "T12",
      "title": "Refinar servicios commons de resolución de Student",
      "description": "Revisar las suites commons para mejorar reutilización de fixtures y consistencia de asserts.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/services/commons/StudentGetByIdServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/student/services/commons/StudentGetByEmailServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/student/services/commons/StudentGetByCourseServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Fixtures y builders compartidos para estudiantes simulados definidos en una clase base.",
        "Assertions usan AssertJ con mensajes descriptivos y verificación de interacciones.",
        "Sin duplicación de preparación de mocks ni datos mágicos."
      ]
    },
    {
      "id": "T13",
      "title": "Generar pruebas para servicios commons de existencia y colecciones",
      "description": "Implementar suites para `StudentExistByDNIService`, `StudentsExistByCourseService` y `StudentsGetByIdListService`, cubriendo respuestas booleanas y colecciones.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/services/commons/StudentExistByDNIServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/student/services/commons/StudentsExistByCourseServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/student/services/commons/StudentsGetByIdListServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Escenarios cubren resultados positivos, negativos y manejo de entradas vacías.",
        "Se validan transformaciones de colecciones y deduplicación de IDs.",
        "Mocks aseguran consultas correctas al repositorio y propagación de excepciones."
      ]
    },
    {
      "id": "T14",
      "title": "Refinar servicios commons de existencia y colecciones",
      "description": "Optimizar suites de existencia y colecciones para estandarizar datos de prueba y asserts.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/services/commons/StudentExistByDNIServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/student/services/commons/StudentsExistByCourseServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/student/services/commons/StudentsGetByIdListServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Uso de constantes descriptivas para DNIs, correos y listas de IDs.",
        "Asserts detallan resultados booleanos y contenido de colecciones.",
        "Se eliminan duplicados de configuración de mocks y se documentan supuestos en comentarios."
      ]
    },
    {
      "id": "T15",
      "title": "Generar pruebas para controllers de escritura de Student",
      "description": "Crear pruebas `@WebMvcTest` o `MockMvc` para controladores de registro, actualización, eliminación y restauración de estudiantes.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/controllers/StudentWriteControllersTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Cobertura de respuestas 201/200/204 y errores relevantes (400/401/404/409).",
        "Validación de payloads JSON mediante `jsonPath` y verificación de mensajes de error.",
        "Mocks aseguran delegación correcta a servicios (`StudentRegisterService`, `StudentUpdateService`, etc.)."
      ]
    },
    {
      "id": "T16",
      "title": "Refinar pruebas de controllers de escritura de Student",
      "description": "Pulir suite de controladores de escritura centralizando configuración y mejorando intención de los casos.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/controllers/StudentWriteControllersTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Configuración de MockMvc y ObjectMapper centralizada en `@BeforeEach`.",
        "Casos documentados con `@DisplayName` y comentarios breves sobre el flujo validado.",
        "Sin duplicación en construcción de requests/responses JSON ni datos hardcodeados."
      ]
    },
    {
      "id": "T17",
      "title": "Generar pruebas para controllers de lectura de Student",
      "description": "Implementar pruebas para `StudentGetController`, `StudentListController` y `StudentListPaginatedController`, validando serialización y parámetros.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/controllers/StudentReadControllersTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Respuestas 200 incluyen estructura esperada y datos simulados consistentes.",
        "Se validan parámetros `page`, `size`, `search`, `order`, `filters` y códigos de error 404/401.",
        "Verificación de delegación a servicios de consulta con Mockito/AssertJ."
      ]
    },
    {
      "id": "T18",
      "title": "Refinar pruebas de controllers de lectura de Student",
      "description": "Optimizar suite de controladores de lectura mejorando reutilización de fixtures y expresividad de aserciones.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/controllers/StudentReadControllersTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Helpers generan respuestas paginadas/listas consistentes y reutilizadas entre casos.",
        "Asserts usan AssertJ y `jsonPath` con alias descriptivos.",
        "Casos edge (sin resultados, filtros inválidos) documentados y cubiertos."
      ]
    },
    {
      "id": "T19",
      "title": "Generar pruebas de validación para DTOs de Student",
      "description": "Agregar pruebas de bean validation para `StudentRequestDto` y `StudentUpdateRequestDto`, incluyendo mensajes personalizados y casos límite.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/dtos/StudentDtoValidationTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Validaciones `@NotEmpty`, `@Email`, `@Size`, `@Pattern`, `@NotNull` verificadas.",
        "Escenarios válidos producen `ConstraintViolation` vacío.",
        "Mensajes de error coinciden con `ValidationMessages` del módulo."
      ]
    },
    {
      "id": "T20",
      "title": "Refinar pruebas de DTOs de Student",
      "description": "Revisar suite de validación de DTOs para mejorar reutilización de fixtures, mensajes descriptivos y cobertura de casos límite.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/student/dtos/StudentDtoValidationTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Builders/helpers generan DTOs válidos e inválidos reutilizables.",
        "Cada escenario documenta claramente el motivo de la violación esperada.",
        "Cobertura incluye combinaciones de campos opcionales/nulos sin duplicar código."
      ]
    },
    {
      "id": "T21",
      "title": "Preparar suites de Admin Student para ejecución con JaCoCo",
      "description": "Ejecutar las suites unitarias preparando el agente JaCoCo y generando el reporte de cobertura actualizado.",
      "command": "/test",
      "params": {
        "command": "./mvnw.cmd org.jacoco:jacoco-maven-plugin:prepare-agent test org.jacoco:jacoco-maven-plugin:report"
      },
      "status": "done",
      "acceptance_criteria": [
        "El comando concluye exitosamente y produce `target/site/jacoco/index.html` con la cobertura del módulo.",
        "Cobertura de services/controllers ≥ 85 % en líneas y ≥ 75 % en ramas para `admin/student`.",
        "Se registran incidencias o fallas de pruebas para seguimiento inmediato."
      ]
    },
    {
      "id": "T22",
      "title": "Consolidar reporte automatizado de pruebas para Admin Student",
      "description": "Ejecutar script de reporte para generar documentación consolidada de las pruebas del módulo en el repositorio.",
      "command": "/report",
      "params": {
        "command": "python scripts/testing_report.py --module \"admin/student\" --output \"docs/testing/test_admin_student.md\""
      },
      "status": "todo",
      "acceptance_criteria": [
        "El archivo `docs/testing/test_admin_student.md` contiene métricas actualizadas y hallazgos clave.",
        "El reporte incluye resumen de cobertura, suites ejecutadas y notas de riesgos abiertos.",
        "Se referencia el reporte de JaCoCo y próximos pasos pendientes en la documentación."
      ]
    }
  ]
}

