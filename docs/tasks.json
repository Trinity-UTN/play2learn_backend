{
  "feature_title": "Plan de pruebas unitarias para módulo Admin Teacher",
  "tasks": [
    {
      "id": "T01",
      "title": "Auditar servicios, controladores y DTOs de Admin Teacher",
      "description": "Inventariar clases, responsabilidades, validaciones y dependencias de services, controllers y DTOs del módulo `admin/teacher`, excluyendo models, repositories, mappers y specs.",
      "command": "/analyze",
      "params": {
        "targets": [
          "src/main/java/trinity/play2learn/backend/admin/teacher/services",
          "src/main/java/trinity/play2learn/backend/admin/teacher/controllers",
          "src/main/java/trinity/play2learn/backend/admin/teacher/dtos"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Se documenta en `docs/testing/teacher-unit-tests-audit.md` el inventario de artefactos relevantes.",
        "Quedan registradas validaciones clave, excepciones y dependencias externas por cada componente.",
        "Se listan riesgos de negocio sin cobertura de pruebas actual."
      ]
    },
    {
      "id": "T02",
      "title": "Diseñar estrategia de pruebas unitarias para Admin Teacher",
      "description": "Definir alcance, métricas de cobertura, dobles de prueba y fixtures compartidos para services, controllers y DTOs del módulo `admin/teacher` siguiendo restricciones del contexto.",
      "command": "/design",
      "params": {
        "artifact": "docs/testing/teacher-unit-test-strategy.md"
      },
      "status": "done",
      "acceptance_criteria": [
        "El documento establece objetivos de cobertura y criterios de salida por tipo de componente.",
        "Incluye matriz de escenarios priorizados por riesgo y dependencias simuladas.",
        "Detalla datos de prueba reutilizables y lineamientos para fixtures comunes."
      ]
    },
    {
      "id": "T03",
      "title": "Generar pruebas para TeacherRegisterService y TeacherUpdateService",
      "description": "Crear suites unitarias que validen registros y actualizaciones de docentes, cubriendo flujos felices y conflictos de negocio.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/TeacherRegisterServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/TeacherUpdateServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Se cubren escenarios de éxito y conflictos por email/DNI duplicado o docente inexistente.",
        "Mocks verifican interacciones con servicios commons y repositorios simulados.",
        "Asserts validan DTO resultante y mensajes de excepción esperados."
      ]
    },
    {
      "id": "T04",
      "title": "Refinar pruebas de registro y actualización de Teacher",
      "description": "Optimizar suites de registro y actualización eliminando duplicidades, mejorando legibilidad y reutilización de datos.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/TeacherRegisterServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/TeacherUpdateServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Helpers/builder centralizados generan requests y entidades simuladas consistentes.",
        "Cada caso usa `@DisplayName` y asserts AssertJ descriptivos con patrón Given-When-Then.",
        "Se mantiene cobertura de ramas sin warnings de Mockito ni code smells."
      ]
    },
    {
      "id": "T05",
      "title": "Generar pruebas para TeacherDeleteService y TeacherRestoreService",
      "description": "Implementar suites que validen borrado lógico y restauración de docentes, manejando reglas de asociaciones.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/TeacherDeleteServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/TeacherRestoreServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Escenarios incluyen docente inexistente, ya eliminado, asociado a materias y flujos exitosos.",
        "Mocks verifican interacciones con repositorios y servicios auxiliares requeridos.",
        "Asserts confirman cambios de estado (`deletedAt`) y mensajes de error."
      ]
    },
    {
      "id": "T06",
      "title": "Refinar pruebas de eliminación y restauración de Teacher",
      "description": "Reorganizar suites de eliminación/restauración para mejorar intención, reutilización de fixtures y claridad narrativa.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/TeacherDeleteServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/TeacherRestoreServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Casos agrupados con `@Nested` u organización equivalente que describa precondiciones.",
        "Fixtures comunes centralizados y reutilizados entre escenarios.",
        "Configuraciones de Mockito sin duplicidad ni datos mágicos."
      ]
    },
    {
      "id": "T07",
      "title": "Generar pruebas para TeacherGetService y TeacherListService",
      "description": "Desarrollar suites que validen la obtención individual y listados simples de docentes, contemplando filtros y estados.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/TeacherGetServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/TeacherListServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "`TeacherGetService` cubre rutas felices y `NotFoundException` ante IDs inexistentes.",
        "`TeacherListService` valida filtros por estado/asignaciones y exclusión de eliminados.",
        "Se verifican delegaciones correctas hacia servicios commons y repositorios simulados."
      ]
    },
    {
      "id": "T08",
      "title": "Refinar pruebas de obtención y listados simples de Teacher",
      "description": "Pulir suites de obtención/listado para mejorar expresividad, documentación de casos límite y reutilización de datos.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/TeacherGetServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/TeacherListServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Helpers generan colecciones/DTOs consistentes reutilizables en todos los escenarios.",
        "Asserts describen contenido y usan AssertJ (`containsExactly`, `extracting`).",
        "Casos edge (sin resultados, filtros vacíos) quedan cubiertos y documentados."
      ]
    },
    {
      "id": "T09",
      "title": "Generar pruebas para TeacherListPaginatedService",
      "description": "Crear suite que valide paginación, búsqueda y filtros dinámicos del listado paginado de docentes.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/TeacherListPaginatedServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Se cubren combinaciones de `search`, `filters`, `order` y `pageable` incluyendo páginas vacías.",
        "Mocks validan uso de `PaginatorUtils`, `PaginationHelper` y adaptaciones a DTOs.",
        "Escenarios con parámetros inválidos o fuera de rango generan respuestas controladas."
      ]
    },
    {
      "id": "T10",
      "title": "Refinar pruebas de listado paginado de Teacher",
      "description": "Optimizar la suite paginada centralizando fixtures y fortaleciendo aserciones descriptivas.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/TeacherListPaginatedServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Builders reutilizables crean `Page`, `PaginatedData` y DTOs para todos los casos.",
        "Asserts emplean AssertJ con mensajes claros y verificación de campos clave.",
        "Se documentan variantes edge como filtros vacíos o órdenes desconocidos."
      ]
    },
    {
      "id": "T11",
      "title": "Generar pruebas para servicios commons de Teacher",
      "description": "Implementar suites para `TeacherGetByIdService`, `TeacherGetByEmailService` y `TeacherExistsByDniService`.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/commons/TeacherGetByIdServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/commons/TeacherGetByEmailServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/commons/TeacherExistsByDniServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Cada servicio cubre resoluciones exitosas y lanzamiento de `NotFoundException` o respuestas negativas.",
        "Mocks verifican consultas correctas al repositorio y normalización de resultados.",
        "Se documentan supuestos de negocio (unicidad de email, formato de DNI) mediante asserts."
      ]
    },
    {
      "id": "T12",
      "title": "Refinar servicios commons de Teacher",
      "description": "Revisar suites commons para mejorar reutilización de fixtures, consistencia de asserts y claridad de supuestos.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/commons/TeacherGetByIdServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/commons/TeacherGetByEmailServiceTest.java",
          "src/test/java/trinity/play2learn/backend/admin/teacher/services/commons/TeacherExistsByDniServiceTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Fixtures compartidos para docentes simulados se centralizan en una clase base o TestMother.",
        "Assertions usan AssertJ con verificación de interacciones y mensajes descriptivos.",
        "Se eliminan duplicaciones de configuración de mocks y datos mágicos."
      ]
    },
    {
      "id": "T13",
      "title": "Generar pruebas para controllers de escritura de Teacher",
      "description": "Crear pruebas `@WebMvcTest`/`MockMvc` cubriendo registro, actualización, eliminación y restauración de docentes.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/controllers/TeacherWriteControllersTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Se cubren respuestas exitosas (201/200/204) y errores relevantes (400/401/404/409).",
        "Validación de payloads JSON mediante `jsonPath` y serialización esperada.",
        "Mocks confirman delegación a servicios `TeacherRegisterService`, `TeacherUpdateService`, `TeacherDeleteService` y `TeacherRestoreService`."
      ]
    },
    {
      "id": "T14",
      "title": "Refinar pruebas de controllers de escritura de Teacher",
      "description": "Pulir suite de controladores de escritura centralizando configuración y expresando claramente cada caso.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/controllers/TeacherWriteControllersTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Configuración de MockMvc/ObjectMapper centralizada en `@BeforeEach` con helpers reutilizables.",
        "Casos documentados con `@DisplayName` y comentarios breves del flujo validado.",
        "Requests/responses JSON construidos mediante métodos utilitarios sin duplicidad."
      ]
    },
    {
      "id": "T15",
      "title": "Generar pruebas para controllers de lectura de Teacher",
      "description": "Implementar pruebas para `TeacherGetController`, `TeacherListController` y `TeacherListPaginatedController`.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/controllers/TeacherReadControllersTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Respuestas 200 validan estructura esperada, datos simulados y metadatos de paginación.",
        "Se cubren parámetros `search`, `filters`, `page`, `size`, `order` y errores 401/404.",
        "Mocks comprueban delegación hacia servicios de consulta correspondientes."
      ]
    },
    {
      "id": "T16",
      "title": "Refinar pruebas de controllers de lectura de Teacher",
      "description": "Optimizar suite de lectura mejorando reutilización de fixtures y expresividad de aserciones.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/controllers/TeacherReadControllersTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Helpers generan respuestas list y paginated consistentes reutilizadas entre casos.",
        "Asserts usan AssertJ y `jsonPath` con alias descriptivos para cada validación.",
        "Casos edge (listas vacías, filtros inválidos) quedan documentados y cubiertos."
      ]
    },
    {
      "id": "T17",
      "title": "Generar pruebas de validación para DTOs de Teacher",
      "description": "Agregar pruebas de Bean Validation para `TeacherRequestDto` y `TeacherUpdateDto`, cubriendo mensajes y combinaciones límite.",
      "command": "/generate",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/dtos/TeacherDtoValidationTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Se verifican anotaciones `@NotBlank`, `@Email`, `@Size`, `@Pattern`, `@NotNull` según corresponda.",
        "Escenarios válidos generan conjunto vacío de `ConstraintViolation`.",
        "Mensajes de error coinciden con `ValidationMessages` del módulo."
      ]
    },
    {
      "id": "T18",
      "title": "Refinar pruebas de DTOs de Teacher",
      "description": "Revisar la suite de validación para mejorar reutilización de fixtures y cobertura de combinaciones límite.",
      "command": "/refine",
      "params": {
        "targets": [
          "src/test/java/trinity/play2learn/backend/admin/teacher/dtos/TeacherDtoValidationTest.java"
        ]
      },
      "status": "done",
      "acceptance_criteria": [
        "Builders/helpers generan DTOs válidos e inválidos reutilizables en todos los casos.",
        "Cada escenario documenta explícitamente el motivo de la violación esperada.",
        "Cobertura incluye campos opcionales/nulos sin duplicar código."
      ]
    },
    {
      "id": "T19",
      "title": "Preparar suites de Admin Teacher para ejecución con JaCoCo",
      "description": "Ejecutar todas las suites unitarias del módulo `admin/teacher` preparando el agente JaCoCo y generando reporte de cobertura.",
      "command": "/test",
      "params": {
        "command": "./mvnw.cmd org.jacoco:jacoco-maven-plugin:prepare-agent test org.jacoco:jacoco-maven-plugin:report"
      },
      "status": "done",
      "acceptance_criteria": [
        "El comando finaliza sin errores y produce `target/site/jacoco/index.html` actualizado.",
        "Cobertura de services/controllers alcanza ≥ 85 % en líneas y ≥ 75 % en ramas.",
        "Incidencias o fallas detectadas quedan registradas para seguimiento inmediato."
      ]
    },
    {
      "id": "T20",
      "title": "Consolidar reporte automatizado de pruebas para Admin Teacher",
      "description": "Generar documentación consolidada de las pruebas del módulo ejecutando el script estándar.",
      "command": "/report",
      "params": {
        "command": "python scripts/testing_report.py --module \"admin/teacher\" --output \"docs/testing/test_admin_teacher.md\""
      },
      "status": "done",
      "acceptance_criteria": [
        "El archivo `docs/testing/test_admin_teacher.md` resume métricas y hallazgos actualizados.",
        "El reporte contiene cobertura JaCoCo, suites ejecutadas y riesgos remanentes.",
        "Se incluyen siguientes pasos o pendientes identificados durante la ejecución."
      ]
    }
  ]
}

